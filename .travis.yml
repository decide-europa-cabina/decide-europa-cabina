language: python
python:
- '3.6'
- '3.5'
matrix:
  include:
  - python: 3.7.1
    dist: xenial
    sudo: true
services:
- postgresql
env:
- DJANGO_VERSION=2.0 DB=postgres
global:
- PGPORT=5432
before_install:
- cd decide
install:
- pip install -q -r ../requirements.txt
- pip install -q Django==$DJANGO_VERSION
before_script:
- rm -f local_settings.py
- cp -rf local_settings.travis.py local_settings.py
- psql -c "create user decide with password 'decide'"
- psql -c "create database decide owner decide"
- python manage.py makemigrations
- python manage.py migrate
script:
- python manage.py test
addons:
  postgresql: '9.6'
deploy:
  skip_cleanup: true
  provider: heroku
  api_key:
    secure: HzX1mjy4Lx2oy7gtr6AQIJ7IBb8In/Gm5lihAY4vgcGo5MKzhaFfq18+41gFKsjJznmWacGaWroBxExPJ/aOCTAcOzZ/Zk7MYjgmEUOGVUn/FXSJKEIU0pfezLwhV33lBbuD+C4xBsEbgTMnD+o9lluznPyQpUGHfebyJaCfqoU3kae1gbyKmirmaWd9oRJSiCXtgsYWkk+lJ2oU1DA7HpfnMaStOklNXIrz8oD45U6Fq2y4rGvZ/A4hO2wKXPIXKdbPzfPE/DEUIBSmkYpuqlVftfYFdF5nAPo+qVhFtSYYGjb8fljXQKy0OiAjmqrRDmJZb7GT4HSqGQcNB49cQfrlxKGzpWDmRYwhOGzFrrunKFwp3JyUnPwp/ThA3PpyxDkS9t2S5Run73O98fgDOZnM8DR5BGmhwFgMRQBZfUSV6u1IOi0S9RNtGAqkJpoFmdZp1KhsRbrl5egwOlxf0yNnbz7/LwrqZ4F4bFk2msjv7EexLrO2JJInqA6iCMiTcYpyVaCnfAdvNFmrocYj6k/8qJu+9M5re+1IhIEqvnx3d4QOahPeexPqnuaY9YQfPPkcnsRzveOJ7TD8avFVsEy5cmD8v+3Q8F8LUylpBqc79Xbw2Zwknrc1s+Dcc0o84+ms45ppSyIba/i9nm6MA0WBbULb9bDH0oAsNz8rCxY=
  app: decide-europa
  strategy: git

